#[macro_use]
extern crate criterion;
extern crate trie;

use criterion::black_box;
use criterion::Criterion;

use trie::*;

fn unmatch(c: &mut Criterion) {
  let mut trie = Trie::new();
  for w in KEYWORDS {
    trie.add(w);
  }
  c.bench_function("unmatch", |b| {
    b.iter(||{
      trie.contains(black_box(TEST_STRING));
    })
  });
}

const TEST_STRING: &str = "\
五稜郭（ごりょうかく）は、江戸時代末期に江戸幕府により蝦夷地の箱館（現在の北海道函館市）郊外に建造された稜堡式の城郭である。同時期に築城された長野県佐久市の龍岡城も稜堡式城郭であり「五稜郭」と呼ばれるが[1]、単に「五稜郭」といえば函館の城郭とする場合も多い[注釈 1]。
予算書時点から五稜郭の名称は用いられていた[3]が、築造中は、亀田役所土塁（かめだやくしょどるい）[4]または亀田御役所土塁（かめだおんやくしょどるい）[5]とも呼ばれた[注釈 2]。元は湿地でネコヤナギが多く生えていた土地であることから、柳野城（やなぎのじょう）の別名を持つ[6]。
五稜郭は箱館開港時に函館山の麓に置かれた箱館奉行所の移転先として築造された。しかし、1866年（慶応2年）の完成からわずか2年後に幕府が崩壊、短期間箱館府が使用した後、箱館戦争で旧幕府軍に占領され、その本拠となった。明治に入ると郭内の建物は1棟を除いて解体され、陸軍の練兵場として使用された。その後、1914年（大正3年）から五稜郭公園として一般開放され、以来、函館市民の憩いの場とともに函館を代表する観光地となっている。
国の特別史跡に指定され、「五稜郭と箱館戦争の遺構」として北海道遺産に選定されている。なお五稜郭は文化庁所管の国有財産[7]であり、函館市が貸与を受け、函館市住宅都市施設公社（指定管理者）が管理している[8]。

沿革
築造

1854年（安政元年）3月、日米和親条約の締結により箱館開港が決定すると、江戸幕府は松前藩領だった箱館周辺を上知し、同年6月に箱館奉行を再置した[10]。箱館奉行所は前幕領時代（1802年-1807年）と同じ基坂（当時は松前藩の箱館奉行詰役所があった[11]）に置かれた。初代奉行の竹内保徳は松前藩の建物を増改築して引き続き使用する方針を示したが、続いて奉行に任命された堀利煕は、同所は箱館湾内から至近かつ遮るものがなく、加えて外国人の遊歩区域内の箱館山に登れば奉行所を眼下に見下ろすことができるので防御に適さず、亀田方面への移転が必要だと上申。そして竹内と堀は江戸に戻ると、箱館湾内からの艦砲射撃の射程外に位置する鍛冶村中道に「御役所四方土塁」を築いて奉行所を移転する意見書を老中・阿部正弘に出した。これが幕閣に受理され、五稜郭の建設が決定した[11]。
併せて、矢不来（やぎらい、現在の北斗市矢不来（やふらい））・押付・山背泊（やませどまり）・弁天岬・立待岬・築島・沖の口番所の7か所の台場の新改築からなる箱館港の防御策も上申されたが、阿部はこれらを同時に築造するのは困難なので、まず弁天岬（弁天台場）と築島（着工されず）に着手するよう指示している[11]。
1855年（安政2年）7月にフランスの軍艦「コンスタンティーヌ号」が箱館に入港[注釈 3]した際、箱館奉行所で器械製造と弾薬製造の御用取扱を務めていた[13]武田斐三郎が同艦の副艦長から指導を受け、大砲設計図や稜堡の絵図面を写し取った[14]。武田は、この絵図面を基に五稜郭と弁天台場の設計を行っている[15]。そして五稜郭と弁天・築島・沖の口台場の築造からなる総工費41万両の予算書が作成された[4]。当初は工期20年の計画だったが、蝦夷地警備を命じられた松前藩（戸切地陣屋）・津軽藩（津軽陣屋）・南部藩（南部陣屋）・仙台藩（白老陣屋）の各陣屋が既に完成していたことから、五稜郭や台場の工事が遅れると箱館市民や外国人に対して幕府の権威を失うことになるので、弁天台場と五稜郭の築造を急ぐこととなった[3]。
1856年（安政3年）11月、組頭・河津祐邦、調役並・鈴木孫四郎、下役元締・山口顕之進、諸術教授役・武田斐三郎らを台場並亀田役所土塁普請掛に任命[4]し、1857年（安政4年）7月に五稜郭の築造を開始[16]。建物については、1856年（安政5年）から郭外北側に役宅を建設、1861年（文久元年）に奉行所庁舎建設を開始した。施工は土木工事を松川弁之助、石垣工事を井上喜三郎、奉行所の建築を江戸在住の小普請方鍛冶方石方請負人中川伝蔵が請け負った[17]。当初は、まず掘割と土塁工事、続いて建物工事、最後に石垣工事を行う計画だったが、この地は地盤が脆弱で冬季の凍結・融解により掘割の壁面が崩落したため、急遽石垣工事を先行させた[16]。
1864年（元治元年）に竣工、6月15日に箱館奉行・小出秀実が奉行所を五稜郭内に移転し業務を開始した。引き続き防風林や庭木としてのアカマツの植樹[注釈 4]や付帯施設の工事も行われ、1866年（慶応2年）に全ての工事が完了した[19]。
五稜郭の総工費は10万4090両（予算14万3千両）、その内訳は堀割・土塁・石垣などの土木工事に5万3144両（予算9万8千両）、建物の建築工事に4万4854両（予算2万5千両）、水道の敷設工事に6092両（予算2万両）というもので、これとは別に弁天台場が10万7277両（予算10万両）を費やして築かれた[20]。この大事業に最繁期で5〜6千人の人夫が使われたといわれ、箱館には人が満ちて街は大いに潤った[21]。
";

static KEYWORDS: &'static [&str] = &[
  "フシギダネ",
  "フシギソウ",
  "フシギバナ",
  "ヒトカゲ",
  "リザード",
  "リザードン",
  "ゼニガメ",
  "カメール",
  "カメックス",
  "キャタピー",
  "トランセル",
  "バタフリー",
  "ビードル",
  "コクーン",
  "スピアー",
  "ポッポ",
  "ピジョン",
  "ピジョット",
  "コラッタ",
  "ラッタ",
  "オニスズメ",
  "オニドリル",
  "アーボ",
  "アーボック",
  "ピカチュウ",
  "ライチュウ",
  "サンド",
  "サンドパン",
  "ニドラン♀",
  "ニドリーナ",
  "ニドクイン",
  "ニドラン♂",
  "ニドリーノ",
  "ニドキング",
  "ピッピ",
  "ピクシー",
  "ロコン",
  "キュウコン",
  "プリン",
  "プクリン",
  "ズバット",
  "ゴルバット",
  "ナゾノクサ",
  "クサイハナ",
  "ラフレシア",
  "パラス",
  "パラセクト",
  "コンパン",
  "モルフォン",
  "ディグダ",
  "ダグトリオ",
  "ニャース",
  "ペルシアン",
  "コダック",
  "ゴルダック",
  "マンキー",
  "オコリザル",
  "ガーディ",
  "ウインディ",
  "ニョロモ",
  "ニョロゾ",
  "ニョロボン",
  "ケーシィ",
  "ユンゲラー",
  "フーディン",
  "ワンリキー",
  "ゴーリキー",
  "カイリキー",
  "マダツボミ",
  "ウツドン",
  "ウツボット",
  "メノクラゲ",
  "ドククラゲ",
  "イシツブテ",
  "ゴローン",
  "ゴローニャ",
  "ポニータ",
  "ギャロップ",
  "ヤドン",
  "ヤドラン",
  "コイル",
  "レアコイル",
  "カモネギ",
  "ドードー",
  "ドードリオ",
  "パウワウ",
  "ジュゴン",
  "ベトベター",
  "ベトベトン",
  "シェルダー",
  "パルシェン",
  "ゴース",
  "ゴースト",
  "ゲンガー",
  "イワーク",
  "スリープ",
  "スリーパー",
  "クラブ",
  "キングラー",
  "ビリリダマ",
  "マルマイン",
  "タマタマ",
  "ナッシー",
  "カラカラ",
  "ガラガラ",
  "サワムラー",
  "エビワラー",
  "ベロリンガ",
  "ドガース",
  "マタドガス",
  "サイホーン",
  "サイドン",
  "ラッキー",
  "モンジャラ",
  "ガルーラ",
  "タッツー",
  "シードラ",
  "トサキント",
  "アズマオウ",
  "ヒトデマン",
  "スターミー",
  "バリヤード",
  "ストライク",
  "ルージュラ",
  "エレブー",
  "ブーバー",
  "カイロス",
  "ケンタロス",
  "コイキング",
  "ギャラドス",
  "ラプラス",
  "メタモン",
  "イーブイ",
  "シャワーズ",
  "サンダース",
  "ブースター",
  "ポリゴン",
  "オムナイト",
  "オムスター",
  "カブト",
  "カブトプス",
  "プテラ",
  "カビゴン",
  "フリーザー",
  "サンダー",
  "ファイヤー",
  "ミニリュウ",
  "ハクリュー",
  "カイリュー",
  "ミュウツー",
  "ミュウ",
  "チコリータ",
  "ベイリーフ",
  "メガニウム",
  "ヒノアラシ",
  "マグマラシ",
  "バクフーン",
  "ワニノコ",
  "アリゲイツ",
  "オーダイル",
  "オタチ",
  "オオタチ",
  "ホーホー",
  "ヨルノズク",
  "レディバ",
  "レディアン",
  "イトマル",
  "アリアドス",
  "クロバット",
  "チョンチー",
  "ランターン",
  "ピチュー",
  "ピィ",
  "ププリン",
  "トゲピー",
  "トゲチック",
  "ネイティ",
  "ネイティオ",
  "メリープ",
  "モココ",
  "デンリュウ",
  "キレイハナ",
  "マリル",
  "マリルリ",
  "ウソッキー",
  "ニョロトノ",
  "ハネッコ",
  "ポポッコ",
  "ワタッコ",
  "エイパム",
  "ヒマナッツ",
  "キマワリ",
  "ヤンヤンマ",
  "ウパー",
  "ヌオー",
  "エーフィ",
  "ブラッキー",
  "ヤミカラス",
  "ヤドキング",
  "ムウマ",
  "アンノーン",
  "ソーナンス",
  "キリンリキ",
  "クヌギダマ",
  "フォレトス",
  "ノコッチ",
  "グライガー",
  "ハガネール",
  "ブルー",
  "グランブル",
  "ハリーセン",
  "ハッサム",
  "ツボツボ",
  "ヘラクロス",
  "ニューラ",
  "ヒメグマ",
  "リングマ",
  "マグマッグ",
  "マグカルゴ",
  "ウリムー",
  "イノムー",
  "サニーゴ",
  "テッポウオ",
  "オクタン",
  "デリバード",
  "マンタイン",
  "エアームド",
  "デルビル",
  "ヘルガー",
  "キングドラ",
  "ゴマゾウ",
  "ドンファン",
  "ポリゴン2",
  "オドシシ",
  "ドーブル",
  "バルキー",
  "カポエラー",
  "ムチュール",
  "エレキッド",
  "ブビィ",
  "ミルタンク",
  "ハピナス",
  "ライコウ",
  "エンテイ",
  "スイクン",
  "ヨーギラス",
  "サナギラス",
  "バンギラス",
  "ルギア",
  "ホウオウ",
  "セレビィ",
  "キモリ",
  "ジュプトル",
  "ジュカイン",
  "アチャモ",
  "ワカシャモ",
  "バシャーモ",
  "ミズゴロウ",
  "ヌマクロー",
  "ラグラージ",
  "ポチエナ",
  "グラエナ",
  "ジグザグマ",
  "マッスグマ",
  "ケムッソ",
  "カラサリス",
  "アゲハント",
  "マユルド",
  "ドクケイル",
  "ハスボー",
  "ハスブレロ",
  "ルンパッパ",
  "タネボー",
  "コノハナ",
  "ダーテング",
  "スバメ",
  "オオスバメ",
  "キャモメ",
  "ペリッパー",
  "ラルトス",
  "キルリア",
  "サーナイト",
  "アメタマ",
  "アメモース",
  "キノココ",
  "キノガッサ",
  "ナマケロ",
  "ヤルキモノ",
  "ケッキング",
  "ツチニン",
  "テッカニン",
  "ヌケニン",
  "ゴニョニョ",
  "ドゴーム",
  "バクオング",
  "マクノシタ",
  "ハリテヤマ",
  "ルリリ",
  "ノズパス",
  "エネコ",
  "エネコロロ",
  "ヤミラミ",
  "クチート",
  "ココドラ",
  "コドラ",
  "ボスゴドラ",
  "アサナン",
  "チャーレム",
  "ラクライ",
  "ライボルト",
  "プラスル",
  "マイナン",
  "バルビート",
  "イルミーゼ",
  "ロゼリア",
  "ゴクリン",
  "マルノーム",
  "キバニア",
  "サメハダー",
  "ホエルコ",
  "ホエルオー",
  "ドンメル",
  "バクーダ",
  "コータス",
  "バネブー",
  "ブーピッグ",
  "パッチール",
  "ナックラー",
  "ビブラーバ",
  "フライゴン",
  "サボネア",
  "ノクタス",
  "チルット",
  "チルタリス",
  "ザングース",
  "ハブネーク",
  "ルナトーン",
  "ソルロック",
  "ドジョッチ",
  "ナマズン",
  "ヘイガニ",
  "シザリガー",
  "ヤジロン",
  "ネンドール",
  "リリーラ",
  "ユレイドル",
  "アノプス",
  "アーマルド",
  "ヒンバス",
  "ミロカロス",
  "ポワルン",
  "カクレオン",
  "カゲボウズ",
  "ジュペッタ",
  "ヨマワル",
  "サマヨール",
  "トロピウス",
  "チリーン",
  "アブソル",
  "ソーナノ",
  "ユキワラシ",
  "オニゴーリ",
  "タマザラシ",
  "トドグラー",
  "トドゼルガ",
  "パールル",
  "ハンテール",
  "サクラビス",
  "ジーランス",
  "ラブカス",
  "タツベイ",
  "コモルー",
  "ボーマンダ",
  "ダンバル",
  "メタング",
  "メタグロス",
  "レジロック",
  "レジアイス",
  "レジスチル",
  "ラティアス",
  "ラティオス",
  "カイオーガ",
  "グラードン",
  "レックウザ",
  "ジラーチ",
  "デオキシス",
  "ナエトル",
  "ハヤシガメ",
  "ドタイトス",
  "ヒコザル",
  "モウカザル",
  "ゴウカザル",
  "ポッチャマ",
  "ポッタイシ",
  "エンペルト",
  "ムックル",
  "ムクバード",
  "ムクホーク",
  "ビッパ",
  "ビーダル",
  "コロボーシ",
  "コロトック",
  "コリンク",
  "ルクシオ",
  "レントラー",
  "スボミー",
  "ロズレイド",
  "ズガイドス",
  "ラムパルド",
  "タテトプス",
  "トリデプス",
  "ミノムッチ",
  "ミノマダム",
  "ガーメイル",
  "ミツハニー",
  "ビークイン",
  "パチリス",
  "ブイゼル",
  "フローゼル",
  "チェリンボ",
  "チェリム",
  "カラナクシ",
  "トリトドン",
  "エテボース",
  "フワンテ",
  "フワライド",
  "ミミロル",
  "ミミロップ",
  "ムウマージ",
  "ドンカラス",
  "ニャルマー",
  "ブニャット",
  "リーシャン",
  "スカンプー",
  "スカタンク",
  "ドーミラー",
  "ドータクン",
  "ウソハチ",
  "マネネ",
  "ピンプク",
  "ペラップ",
  "ミカルゲ",
  "フカマル",
  "ガバイト",
  "ガブリアス",
  "ゴンベ",
  "リオル",
  "ルカリオ",
  "ヒポポタス",
  "カバルドン",
  "スコルピ",
  "ドラピオン",
  "グレッグル",
  "ドクロッグ",
  "マスキッパ",
  "ケイコウオ",
  "ネオラント",
  "タマンタ",
  "ユキカブリ",
  "ユキノオー",
  "マニューラ",
  "ジバコイル",
  "ベロベルト",
  "ドサイドン",
  "モジャンボ",
  "エレキブル",
  "ブーバーン",
  "トゲキッス",
  "メガヤンマ",
  "リーフィア",
  "グレイシア",
  "グライオン",
  "マンムー",
  "ポリゴンZ",
  "エルレイド",
  "ダイノーズ",
  "ヨノワール",
  "ユキメノコ",
  "ロトム",
  "ユクシー",
  "エムリット",
  "アグノム",
  "ディアルガ",
  "パルキア",
  "ヒードラン",
  "レジギガス",
  "ギラティナ",
  "クレセリア",
  "フィオネ",
  "マナフィ",
  "ダークライ",
  "シェイミ",
  "アルセウス",
];

criterion_group!(benches, unmatch);
criterion_main!(benches);
